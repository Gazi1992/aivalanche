**************** uncommented deck **************

     1       1  **********************************************************
     0       2  .param gmin=1e-12
     0       3  .global gnd
     8      23  .temp 120.0
     2      27  .subckt dut p n params: area=1 m=1 is=1e-14 jsw=1e-15 n=1 rs=1e-6 bv=1e10 ibv=1e-3 nbv=1 ikf=1e-5 ikr=1e-5 jtun=0 jtunsw=0 ntun=30 xtitun=3 keg=1 isr=1e-14 nr=1 cjo=0 cjp=0 fc=0.5 fcs=0.5 mj=0.2 mjsw=0.33 vj=1 php=1 tt=0 lm=0 lp=0 wm=0 wp=0 xom=1e-6 xoi=1e-6 xm=0 xp=0 eg=1.11 tnom=27 trs1=5e-3 trs2=5e-4 tm1=0 tm2=0 ttt1=0 ttt2=0 xti=3 tlev=0 tlevc=0 cta=0 ctp=0 tcv=0 kf=0 af=1
     3      84  .model diode d level=3 is={is} jsw={jsw} n={n} rs={rs} bv={bv} ibv={ibv} nbv={nbv} ikf={ikf} ikr={ikr} jtun={jtun} jtunsw={jtunsw} ntun={ntun} xtitun={xtitun} keg={keg} isr={isr} nr={nr} cjo={cjo} cjp={cjp} fc={fc} fcs={fcs} mj={mj} mjsw={mjsw} vj={vj} php={php} tt={tt} lm={lm} lp={lp} wm={wm} wp={wp} xom={xom} xoi={xoi} xm={xm} xp={xp} eg={eg} tnom={tnom} trs1={trs1} trs2={trs2} tm1={tm1} tm2={tm2} ttt1={ttt1} ttt2={ttt2} xti={xti} tlev={tlev} tlevc={tlevc} cta={cta} ctp={ctp} tcv={tcv} kf={kf} af={af}
     4      85  d1 p n diode area={area} m={m}
     5      86  .ends
    16      90  e_v_0_2 p_0_2 0 v_sweep 0 1
    17      91  v_meas_0_2 n_0_2 0 0
    18      92  x_0_2 p_0_2 n_0_2 dut 2e-06 1.0 1e-14 1e-15 1 1e-6 1e10 1e-3 1 1e-5 1e-5 0 0 30 3 1 1e-14 1 0 0 0.5 0.5 0.2 0.33 1 1 0 0 0 0 0 1e-6 1e-6 0 0 1.11 27 5e-3 5e-4 0 0 0 0 3 0 0 0 0 0 0 1
    22      95  e_v_1_2 p_1_2 0 v_sweep 0 1
    23      96  v_meas_1_2 n_1_2 0 0
    24      97  x_1_2 p_1_2 n_1_2 dut 5e-07 1.0 1e-14 1e-15 1 1e-6 1e10 1e-3 1 1e-5 1e-5 0 0 30 3 1 1e-14 1 0 0 0.5 0.5 0.2 0.33 1 1 0 0 0 0 0 1e-6 1e-6 0 0 1.11 27 5e-3 5e-4 0 0 0 0 3 0 0 0 0 0 0 1
    30     101  v_sweep v_sweep 0 0
    33     103  .control
    36     105  alterparam dut is=1.301988003655862e-19
    37     106  alterparam dut jsw=5.2456790695993e-15
    38     107  alterparam dut n=1.6721853351291618
    39     108  alterparam dut rs=0.1352820608747862
    40     109  alterparam dut bv=3.813323474245202e+18
    41     110  alterparam dut ibv=9.134701331962986e-06
    42     111  alterparam dut nbv=1.4074258070593935
    43     112  alterparam dut ikf=3.821714605411962e-06
    44     113  alterparam dut ikr=1.505498238739193e-05
    45     114  alterparam dut trs1=1*-0.005520461031660879
    46     115  alterparam dut trs2=1*-0.000488663832858705
    47     116  reset
    51     119  save v(p_0_2) i(v_meas_0_2) i(v_meas_1_2) v(p_1_2)
    54     121  dc v_sweep -0.2 3.5 0.1
    57     123  set wr_vecnames
    58     124  set wr_singlescale
    59     125  wrdata /home/gazi/Desktop/Work/custom_packages/calibration/test/diode/results/calibration_2023-06-26_20:45:10/simulation_files/dc_sweep_2.csv v(p_0_2) i(v_meas_0_2) i(v_meas_1_2) v(p_1_2)
    61     126  .endc
    65     129  .end

****************** complete deck ***************

     1       1  **********************************************************
     0       2  .param gmin=1e-12
     0       3  .global gnd
     0       4  *param temp={temper}
     1       5  *func temp() {temper}
     0       6  *param vt={(temper+273.15)*8.6173303e-5}
     2       7  *func vt() {(temper+273.15)*8.6173303e-5}
     0       8  *func limit(x, a, b) { ternary_fcn(a>b,max(min(x,a),b),max(min(x,b),a))}
     0       9  *func pwr(x, a) { pow(x,a)}
     0      10  *func pwrs(x, a) { sgn(x)*pow(x,a)}
     0      11  *func stp(x) { u(x)}
     0      12  *func if(a, b, c) {ternary_fcn(a,b,c)}
     0      13  *func int(x) { sign(x)*floor(abs(x))}
     0      14  *func uplim(x, pos, z) { min(x,pos-z)+(1-(min(max(0,x-pos+z),2*z)/2/z-1)**2)*z }
     0      15  *func dnlim(x, neg, z) { max(x,neg+z)-(1-(min(max(0,-x+neg+z),2*z)/2/z-1)**2)*z }
     0      16  *func uplim_tanh(x, pos, z) { min(x,pos-z)+tanh(max(0,x-pos+z)/z)*z }
     0      17  *func dnlim_tanh(x, neg, z) { max(x,neg+z)-tanh(max(0,neg+z-x)/z)*z }
     2      18  * this file is generated by aivalanche
     3      19  * file id: 2
     4      20  * simulation type: dc_sweep
     5      21  **********************************************************
     7      22  * define the temperature
     8      23  .temp 120.0
    10      24  * include the dut file
     9      25  *INCLUDE /home/gazi/Desktop/Work/custom_packages/calibration/src/templates/diode/dut.cir
     1      26  ********** diode template **********
     2      27  .subckt dut p n params: area=1 m=1 is=1e-14 jsw=1e-15 n=1 rs=1e-6 bv=1e10 ibv=1e-3 nbv=1 ikf=1e-5 ikr=1e-5 jtun=0 jtunsw=0 ntun=30 xtitun=3 keg=1 isr=1e-14 nr=1 cjo=0 cjp=0 fc=0.5 fcs=0.5 mj=0.2 mjsw=0.33 vj=1 php=1 tt=0 lm=0 lp=0 wm=0 wp=0 xom=1e-6 xoi=1e-6 xm=0 xp=0 eg=1.11 tnom=27 trs1=5e-3 trs2=5e-4 tm1=0 tm2=0 ttt1=0 ttt2=0 xti=3 tlev=0 tlevc=0 cta=0 ctp=0 tcv=0 kf=0 af=1
     0      28  *param area=1
     0      29  *param m=1
     0      30  *param is=1e-14
     0      31  *param jsw=1e-15
     0      32  *param n=1
     0      33  *param rs=1e-6
     0      34  *param bv=1e10
     0      35  *param ibv=1e-3
     0      36  *param nbv=1
     0      37  *param ikf=1e-5
     0      38  *param ikr=1e-5
     0      39  *param jtun=0
     0      40  *param jtunsw=0
     0      41  *param ntun=30
     0      42  *param xtitun=3
     0      43  *param keg=1
     0      44  *param isr=1e-14
     0      45  *param nr=1
     0      46  *param cjo=0
     0      47  *param cjp=0
     0      48  *param fc=0.5
     0      49  *param fcs=0.5
     0      50  *param mj=0.2
     0      51  *param mjsw=0.33
     0      52  *param vj=1
     0      53  *param php=1
     0      54  *param tt=0
     0      55  *param lm=0
     0      56  *param lp=0
     0      57  *param wm=0
     0      58  *param wp=0
     0      59  *param xom=1e-6
     0      60  *param xoi=1e-6
     0      61  *param xm=0
     0      62  *param xp=0
     0      63  *param eg=1.11
     0      64  *param tnom=27
     0      65  *param trs1=5e-3
     0      66  *param trs2=5e-4
     0      67  *param tm1=0
     0      68  *param tm2=0
     0      69  *param ttt1=0
     0      70  *param ttt2=0
     0      71  *param xti=3
     0      72  *param tlev=0
     0      73  *param tlevc=0
     0      74  *param cta=0
     0      75  *param ctp=0
     0      76  *param tcv=0
     0      77  *param kf=0
     0      78  *param af=1
     0      79  *param  area=1 m=1 is=1e-14 jsw=1e-15 n=1 rs=1e-6 bv=1e10 ibv=1e-3 nbv=1 ikf=1e-5 ikr=1e-5 jtun=0 jtunsw=0 ntun=30 xtitun=3 keg=1 isr=1e-14 nr=1 cjo=0 cjp=0 fc=0.5 fcs=0.5 mj=0.2 mjsw=0.33 vj=1 php=1 tt=0 lm=0 lp=0 wm=0 wp=0 xom=1e-6 xoi=1e-6 xm=0 xp=0 eg=1.11 tnom=27 trs1=5e-3 trs2=5e-4 tm1=0 tm2=0 ttt1=0 ttt2=0 xti=3 tlev=0 tlevc=0 cta=0 ctp=0 tcv=0 kf=0 af=1
     0      80  *param temp={temper}
     0      81  *func temp() {temper}
     0      82  *param vt={(temper+273.15)*8.6173303e-5}
     1      83  *func vt() {(temper+273.15)*8.6173303e-5}
     3      84  .model diode d level=3 is={is} jsw={jsw} n={n} rs={rs} bv={bv} ibv={ibv} nbv={nbv} ikf={ikf} ikr={ikr} jtun={jtun} jtunsw={jtunsw} ntun={ntun} xtitun={xtitun} keg={keg} isr={isr} nr={nr} cjo={cjo} cjp={cjp} fc={fc} fcs={fcs} mj={mj} mjsw={mjsw} vj={vj} php={php} tt={tt} lm={lm} lp={lp} wm={wm} wp={wp} xom={xom} xoi={xoi} xm={xm} xp={xp} eg={eg} tnom={tnom} trs1={trs1} trs2={trs2} tm1={tm1} tm2={tm2} ttt1={ttt1} ttt2={ttt2} xti={xti} tlev={tlev} tlevc={tlevc} cta={cta} ctp={ctp} tcv={tcv} kf={kf} af={af}
     4      85  d1 p n diode area={area} m={m}
     5      86  .ends
    11      87  *end of: /home/gazi/desktop/work/custom_packages/calibration/src/templates/diode/dut.cir
    13      88  ** start testbenches
    15      89  ********************* dut testbench 0_2 *********************
    16      90  e_v_0_2 p_0_2 0 v_sweep 0 1
    17      91  v_meas_0_2 n_0_2 0 0
    18      92  x_0_2 p_0_2 n_0_2 dut 2e-06 1.0 1e-14 1e-15 1 1e-6 1e10 1e-3 1 1e-5 1e-5 0 0 30 3 1 1e-14 1 0 0 0.5 0.5 0.2 0.33 1 1 0 0 0 0 0 1e-6 1e-6 0 0 1.11 27 5e-3 5e-4 0 0 0 0 3 0 0 0 0 0 0 1
    19      93  *************************************************************
    21      94  ********************* dut testbench 1_2 *********************
    22      95  e_v_1_2 p_1_2 0 v_sweep 0 1
    23      96  v_meas_1_2 n_1_2 0 0
    24      97  x_1_2 p_1_2 n_1_2 dut 5e-07 1.0 1e-14 1e-15 1 1e-6 1e10 1e-3 1 1e-5 1e-5 0 0 30 3 1 1e-14 1 0 0 0.5 0.5 0.2 0.33 1 1 0 0 0 0 0 1e-6 1e-6 0 0 1.11 27 5e-3 5e-4 0 0 0 0 3 0 0 0 0 0 0 1
    25      98  *************************************************************
    27      99  ** end testbenches
    29     100  * declare the v_sweep, which will change during the simulation.
    30     101  v_sweep v_sweep 0 0
    32     102  ********** start of control section **********
    33     103  .control
    35     104  ** model parameters start
    36     105  alterparam dut is=1.301988003655862e-19
    37     106  alterparam dut jsw=5.2456790695993e-15
    38     107  alterparam dut n=1.6721853351291618
    39     108  alterparam dut rs=0.1352820608747862
    40     109  alterparam dut bv=3.813323474245202e+18
    41     110  alterparam dut ibv=9.134701331962986e-06
    42     111  alterparam dut nbv=1.4074258070593935
    43     112  alterparam dut ikf=3.821714605411962e-06
    44     113  alterparam dut ikr=1.505498238739193e-05
    45     114  alterparam dut trs1=1*-0.005520461031660879
    46     115  alterparam dut trs2=1*-0.000488663832858705
    47     116  reset
    48     117  ** model parameters end
    50     118  ** declare the vectors to save.
    51     119  save v(p_0_2) i(v_meas_0_2) i(v_meas_1_2) v(p_1_2)
    53     120  ** run the dc sweep analysis.
    54     121  dc v_sweep -0.2 3.5 0.1
    56     122  ** save the output to file.
    57     123  set wr_vecnames
    58     124  set wr_singlescale
    59     125  wrdata /home/gazi/Desktop/Work/custom_packages/calibration/test/diode/results/calibration_2023-06-26_20:45:10/simulation_files/dc_sweep_2.csv v(p_0_2) i(v_meas_0_2) i(v_meas_1_2) v(p_1_2)
    61     126  .endc
    62     127  ********** end of control section **********
    64     128  *end
    65     129  .end
