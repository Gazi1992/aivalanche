**********************************************************
* THIS FILE IS GENERATED BY AIVALANCHE
* FILE ID: 2
* SIMULATION TYPE: ac_sweep
**********************************************************

* Define the temperature
.TEMP 25.0

* Include the dut file
.INCLUDE /home/gazi/Desktop/Work/custom_packages/calibration/src/templates/bsim4/nmos/dut.cir

** Start testbenches

********************* dut testbench 22_0 *********************
v_gs_ac_22_0 g_22_0 g_ac_22_0 DC 0 AC 1
e_gs_22_0 g_ac_22_0 0 v_sweep 0 1
v_ds_22_0 d_22_0 0 0.0
v_s_22_0 s_22_0 0 0
v_bs_22_0 b_22_0 0 0.0
x_22_0 d_22_0 g_22_0 s_22_0 b_22_0 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

********************* dut testbench 22_1 *********************
v_gs_ac_22_1 g_22_1 g_ac_22_1 DC 0 AC 1
e_gs_22_1 g_ac_22_1 0 v_sweep 0 1
v_ds_22_1 d_22_1 0 0.0
v_s_22_1 s_22_1 0 0
v_bs_22_1 b_22_1 0 1.0
x_22_1 d_22_1 g_22_1 s_22_1 b_22_1 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

********************* dut testbench 22_2 *********************
v_gs_ac_22_2 g_22_2 g_ac_22_2 DC 0 AC 1
e_gs_22_2 g_ac_22_2 0 v_sweep 0 1
v_ds_22_2 d_22_2 0 0.0
v_s_22_2 s_22_2 0 0
v_bs_22_2 b_22_2 0 -1.0
x_22_2 d_22_2 g_22_2 s_22_2 b_22_2 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

** End testbenches

* Declare the v_sweep, which will change during the simulation.
v_sweep v_sweep 0 0

********** Start of control section **********
.control

** Model parameters start
alterparam dut a0 = 1.2090809379313148
alterparam dut a1 = 0.0468002614329711
alterparam dut a2 = 0.3167363675689687
alterparam dut acde = 1.0295448829413008
alterparam dut ags = 0.0027161560955753
alterparam dut cf = 9.501718576833453e-13
alterparam dut cgdl = 9.962244940880384e-11
alterparam dut cgdo = 9.916368477519659e-11
alterparam dut ckappas = 0.5549640043804881
alterparam dut clc = 5.24077324408588e-08
alterparam dut cle = 0.6746742565446371
alterparam dut dlc = 1*-6.440543334186077e-08
alterparam dut drout = 1.2365131705465164
alterparam dut dsub = 0.3951073855961773
alterparam dut dvt0 = 9.846583292723514
alterparam dut dvt0w = 1.3972717407411146
alterparam dut dvt1 = 0.7568137951098997
alterparam dut dvt1w = 8420804.328252044
alterparam dut dvt2 = 1*-0.005769559119302
alterparam dut dvt2w = 1*-0.0351085461387059
alterparam dut dwg = 7.841478736925807e-08
alterparam dut eta0 = 0.6394136544465505
alterparam dut etab = 1*-0.1519065294025654
alterparam dut k1 = 0.5117779256139918
alterparam dut k2 = 1*-0.0097909754561962
alterparam dut k3 = 46.48653161869615
alterparam dut k3b = 1*-3.599411223306572
alterparam dut keta = 1*-0.0016417798462794
alterparam dut lint = 1*-2.3353199684012078e-09
alterparam dut ll = 7.656623787569985e-14
alterparam dut moin = 14.420625458611212
alterparam dut ndep = 1.4115956977658398e+17
alterparam dut nfactor = 0.8570876205246536
alterparam dut ngate = 9.565958497918817e+19
alterparam dut noff = 0.9906839292701866
alterparam dut pclm = 1.5204568004183996e-05
alterparam dut pdiblc1 = 4.387884118028986e-06
alterparam dut pdiblc2 = 0.09568666434925689
alterparam dut pdiblcb = 1*-0.0173984463124021
alterparam dut pvag = 0.4746530711605803
alterparam dut rdsw = 1010.0830828507538
alterparam dut toxp = 5.081121458126929e-09
alterparam dut u0 = 41.24602375087582
alterparam dut ua = 1*-9.340136041456052e-09
alterparam dut ub = 1.7235942223817882e-18
alterparam dut uc = 1*-5.985364586154554e-09
alterparam dut voff = 1*-0.051529689493088
alterparam dut voffcv = 0.024981479105827
alterparam dut vsat = 164029.13121849112
alterparam dut vth0 = 0.4771713327665332
alterparam dut w0 = 4.000458341752382e-07
alterparam dut wint = 1*-3.60291222814035e-08
alterparam dut ww = 1*-1.730944864245217e-14
alterparam dut wwl = 1*-5.767869400116223e-20
alterparam dut lwl = 1*-7.634605933847313e-20
alterparam dut voffl = 1*-1.6044123271922713e-08
alterparam dut xpart = 0.3415927842744424
alterparam dut bin_pvsat = 0.5153885603832652
alterparam dut bin_prdsw = 0.5586359197098524
alterparam dut bin_ppclm = 0.3917373350718282
alterparam dut bin_wketa = 0.9371167100216118
alterparam dut bin_lketa = 0.8300701019769551
alterparam dut bin_pketa = 0.2453546492252196
alterparam dut bin_wk3 = 0.3398087424743957
alterparam dut bin_wk3b = 0.3827145064434726
reset
** Model parameters end

** Declare the vectors to save.
save i(v_bs_22_2) i(v_bs_22_0) i(v_bs_22_1)

** Write the header of the results file.
echo "vgs,cgb_22_0,cgb_22_2,cgb_22_1" > /home/gazi/Desktop/Work/custom_packages/calibration/test/bsim4/results/calibration_2023-06-24_22:47:23/simulation_files/ac_sweep_2.csv

** Start the simulation loop.
compose values_list start=-2.0 stop=2.0 step=0.05
foreach val $&values_list
    alter v_sweep $val
    ac lin 1 10000.0 10000.0

    let cgb_22_0 = abs(imag(i(v_bs_22_0)))/2*pi*10000.0
    let cgb_22_1 = abs(imag(i(v_bs_22_1)))/2*pi*10000.0
    let cgb_22_2 = abs(imag(i(v_bs_22_2)))/2*pi*10000.0

    echo "$val,$&cgb_22_0,$&cgb_22_2,$&cgb_22_1" >> /home/gazi/Desktop/Work/custom_packages/calibration/test/bsim4/results/calibration_2023-06-24_22:47:23/simulation_files/ac_sweep_2.csv
end

.endc
********** End of control section **********

.end