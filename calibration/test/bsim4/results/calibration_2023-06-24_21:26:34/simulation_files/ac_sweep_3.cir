**********************************************************
* THIS FILE IS GENERATED BY AIVALANCHE
* FILE ID: 3
* SIMULATION TYPE: ac_sweep
**********************************************************

* Define the temperature
.TEMP 25.0

* Include the dut file
.INCLUDE /home/gazi/Desktop/Work/custom_packages/calibration/src/templates/bsim4/nmos/dut.cir

** Start testbenches

********************* dut testbench 20_0 *********************
v_gs_ac_20_0 g_20_0 g_ac_20_0 DC 0 AC 1
e_gs_20_0 g_ac_20_0 0 v_sweep 0 1
v_ds_20_0 d_20_0 0 0.0
v_s_20_0 s_20_0 0 0
v_bs_20_0 b_20_0 0 0.0
x_20_0 d_20_0 g_20_0 s_20_0 b_20_0 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

********************* dut testbench 20_1 *********************
v_gs_ac_20_1 g_20_1 g_ac_20_1 DC 0 AC 1
e_gs_20_1 g_ac_20_1 0 v_sweep 0 1
v_ds_20_1 d_20_1 0 0.0
v_s_20_1 s_20_1 0 0
v_bs_20_1 b_20_1 0 1.0
x_20_1 d_20_1 g_20_1 s_20_1 b_20_1 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

********************* dut testbench 20_2 *********************
v_gs_ac_20_2 g_20_2 g_ac_20_2 DC 0 AC 1
e_gs_20_2 g_ac_20_2 0 v_sweep 0 1
v_ds_20_2 d_20_2 0 0.0
v_s_20_2 s_20_2 0 0
v_bs_20_2 b_20_2 0 -1.0
x_20_2 d_20_2 g_20_2 s_20_2 b_20_2 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

** End testbenches

* Declare the v_sweep, which will change during the simulation.
v_sweep v_sweep 0 0

********** Start of control section **********
.control

** Model parameters start
alterparam dut a0 = 1.2368076619569264
alterparam dut a1 = 0.05951765118572914
alterparam dut a2 = 0.6485398567123293
alterparam dut acde = 1.008158477194324
alterparam dut ags = 0.0082895051238731
alterparam dut cf = 9.158501715281375e-13
alterparam dut cgdl = 1.0110625484302078e-10
alterparam dut cgdo = 9.819378321328201e-11
alterparam dut ckappas = 0.5550469934982748
alterparam dut clc = 2.7647632302475353e-07
alterparam dut cle = 0.5899322957696734
alterparam dut dlc = 1*-6.083039587361266e-08
alterparam dut drout = 1.9261592615329868
alterparam dut dsub = 0.20768843672367596
alterparam dut dvt0 = 7.651282802993613
alterparam dut dvt0w = 4.441379510884176
alterparam dut dvt1 = 0.5892557060878542
alterparam dut dvt1w = 2070646.2501729073
alterparam dut dvt2 = 1*-0.11596273968437511
alterparam dut dvt2w = 1*-0.01629348103400753
alterparam dut dwg = 8.600993516207294e-08
alterparam dut eta0 = 0.9461326997679032
alterparam dut etab = 1*-0.16154447269705285
alterparam dut k1 = 0.5114998041664766
alterparam dut k2 = 1*-0.00876006149855342
alterparam dut k3 = 46.393375173488266
alterparam dut k3b = 1*-2.5242277336444374
alterparam dut keta = 1*-0.09831780820182297
alterparam dut lint = 1*-1.4472355747272546e-08
alterparam dut ll = 7.826588878448925e-14
alterparam dut moin = 15.3917628867453
alterparam dut ndep = 1.423205246407859e+17
alterparam dut nfactor = 0.8219518833600268
alterparam dut ngate = 9.433313770244886e+19
alterparam dut noff = 0.9949943232649727
alterparam dut pclm = 1.400662043701356e-08
alterparam dut pdiblc1 = 5.454746953212474e-07
alterparam dut pdiblc2 = 0.0973683243831033
alterparam dut pdiblcb = 1*-0.021456209649586055
alterparam dut pvag = 1*-0.8990684921093779
alterparam dut rdsw = 878.5229801344328
alterparam dut toxp = 5.070669758327196e-09
alterparam dut u0 = 41.12114068589717
alterparam dut ua = 1*-9.311233340781523e-09
alterparam dut ub = 1.8289564451310714e-18
alterparam dut uc = 1*-5.712657276294119e-09
alterparam dut voff = 1*-0.05255228025749517
alterparam dut voffcv = 0.025244418512503586
alterparam dut vsat = 142328.9746367033
alterparam dut vth0 = 0.47768611810619577
alterparam dut w0 = 4.2343094263733126e-07
alterparam dut wint = 1*-3.343685898473753e-08
alterparam dut ww = 1*-1.6701724655265013e-14
alterparam dut wwl = 1*-6.482467907129304e-20
alterparam dut lwl = 1*-9.399787918030116e-20
alterparam dut voffl = 1*-1.6108788222262426e-08
alterparam dut xpart = 0.6065533612518752
alterparam dut bin_pvsat = 0.31502823992047974
alterparam dut bin_prdsw = 0.6739524695706172
alterparam dut bin_ppclm = 0.01682191798177035
alterparam dut bin_wketa = 0.01682191798177035
alterparam dut bin_lketa = 0.49449923102007964
alterparam dut bin_pketa = 0.7868929148005425
alterparam dut bin_wk3 = 0.9349284529450989
alterparam dut bin_wk3b = 0.01682191798177035
reset
** Model parameters end

** Declare the vectors to save.
save i(v_ds_20_2) i(v_ds_20_1) i(v_ds_20_0)

** Write the header of the results file.
echo "vgs,cgd_20_1,cgd_20_2,cgd_20_0" > /home/gazi/Desktop/Work/custom_packages/calibration/test/bsim4/results/calibration_2023-06-24_21:26:34/simulation_files/ac_sweep_3.csv

** Start the simulation loop.
compose values_list start=-2.0 stop=2.0 step=0.05
foreach val $&values_list
    alter v_sweep $val
    ac lin 1 10000.0 10000.0

    let cgd_20_0 = abs(imag(i(v_ds_20_0)))/2*pi*10000.0
    let cgd_20_1 = abs(imag(i(v_ds_20_1)))/2*pi*10000.0
    let cgd_20_2 = abs(imag(i(v_ds_20_2)))/2*pi*10000.0

    echo "$val,$&cgd_20_1,$&cgd_20_2,$&cgd_20_0" >> /home/gazi/Desktop/Work/custom_packages/calibration/test/bsim4/results/calibration_2023-06-24_21:26:34/simulation_files/ac_sweep_3.csv
end

.endc
********** End of control section **********

.end