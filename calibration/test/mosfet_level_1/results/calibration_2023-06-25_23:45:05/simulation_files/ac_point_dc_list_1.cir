**********************************************************
* THIS FILE IS GENERATED BY AIVALANCHE
* FILE ID: 1
* SIMULATION TYPE: ac_point_dc_list
**********************************************************

* Define the temperature
.TEMP 25.0

* Include the dut file
.INCLUDE /home/gazi/Desktop/Work/custom_packages/calibration/src/templates/mosfet_level_1/nmos/dut.cir

** Start testbenches

********************* dut testbench 23_1 *********************
v_gs_ac_23_1 g_23_1 g_ac_23_1 DC 0 AC 1
e_gs_23_1 g_ac_23_1 0 v_sweep 0 1
v_ds_23_1 d_23_1 0 0.0
v_s_23_1 s_23_1 0 0
v_bs_23_1 b_23_1 0 1.0
x_23_1 d_23_1 g_23_1 s_23_1 b_23_1 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

********************* dut testbench 23_2 *********************
v_gs_ac_23_2 g_23_2 g_ac_23_2 DC 0 AC 1
e_gs_23_2 g_ac_23_2 0 v_sweep 0 1
v_ds_23_2 d_23_2 0 0.0
v_s_23_2 s_23_2 0 0
v_bs_23_2 b_23_2 0 -1.0
x_23_2 d_23_2 g_23_2 s_23_2 b_23_2 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

** End testbenches

* Declare the v_sweep, which will change during the simulation.
v_sweep v_sweep 0 0

********** Start of control section **********
.control

** Model parameters start
alterparam dut vto = 0.6528133129632973
alterparam dut kp = 1.0509296938396604e-07
alterparam dut gamma = 0.1709614219110378
alterparam dut phi = 0.41029314207031514
alterparam dut rd = 0.13897906083831235
alterparam dut rs = 1.2825335980556474
alterparam dut cbd = 2.2256027644739702e-20
alterparam dut cbs = 2.2256027644739702e-20
alterparam dut is = 3.7981577206957224e-12
alterparam dut pb = 1.4840971917374743
alterparam dut cgso = 1.932718094724201e-13
alterparam dut cgdo = 4.7886694024182e-13
alterparam dut cgbo = 5.91568468822088e-12
alterparam dut rsh = 19.739065334704655
alterparam dut cj = 1.5986386488101735e-06
alterparam dut mj = 0.6483681844669367
alterparam dut cjsw = 1.8202599022008183e-10
alterparam dut mjsw = 0.16945999751740515
alterparam dut tox = 9.604031259492341e-08
alterparam dut nsub = 286164164023.5453
alterparam dut nss = 12622225810977.88
alterparam dut nfs = 495330.76652341784
alterparam dut tpg = 3.2041840057977633
alterparam dut xj = 1.1582291673215674e-06
alterparam dut ld = 4.9533076652341785e-15
alterparam dut uo = 223.66657787511002
alterparam dut vmax = 222.56027644739703
alterparam dut kf = 2.7958704813874247e-21
alterparam dut af = 0.9440972706293765
alterparam dut fc = 1.5916096877325492
reset
** Model parameters end

** Declare the vectors to save.
save i(v_ds_23_1) i(v_s_23_1) i(v_bs_23_2) i(v_ds_23_2) i(v_bs_23_1) i(v_s_23_2)

** Write the header of the results file.
echo "vgs,cgg_23_1,cgg_23_2" > /home/gazi/Desktop/Work/custom_packages/calibration/test/mosfet_level_1/results/calibration_2023-06-25_23:45:05/simulation_files/ac_point_dc_list_1.csv

** Start the simulation loop.
set values_list = ( -2.0 -1.9 -1.85 -1.8 -1.75 -1.7 -1.65 -1.6 -1.55 -1.5 -1.45 -1.4 -1.35 -1.3 -1.25 -1.2 -1.15 -1.1 -1.05 -1.0 -0.95 -0.9 -0.85 -0.8 -0.75 -0.7 -0.65 -0.6 -0.55 -0.5 -0.45 -0.4 -0.35 -0.3 -0.25 -0.2 -0.15 -0.1 -0.05 1.20737e-15 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 0.5 0.55 0.6 0.65 0.7 0.75 0.8 0.85 0.9 0.95 1.0 1.05 1.1 1.15 1.2 1.25 1.3 1.35 1.4 1.45 1.5 1.55 1.6 1.65 1.7 1.75 1.8 1.85 1.9 1.95 2.0 )
foreach val $values_list
    alter v_sweep $val
    ac lin 1 10000.0 10000.0

    let cgg_23_1 = (abs(imag(i(v_s_23_1))) + abs(imag(i(v_ds_23_1))) + abs(imag(i(v_bs_23_1))))/2*pi*10000.0
    let cgg_23_2 = (abs(imag(i(v_s_23_2))) + abs(imag(i(v_ds_23_2))) + abs(imag(i(v_bs_23_2))))/2*pi*10000.0

    echo "$val,$&cgg_23_1,$&cgg_23_2" >> /home/gazi/Desktop/Work/custom_packages/calibration/test/mosfet_level_1/results/calibration_2023-06-25_23:45:05/simulation_files/ac_point_dc_list_1.csv
end

.endc
********** End of control section **********

.end