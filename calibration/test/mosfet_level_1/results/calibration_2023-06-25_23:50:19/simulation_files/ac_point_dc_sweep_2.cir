**********************************************************
* THIS FILE IS GENERATED BY AIVALANCHE
* FILE ID: 2
* SIMULATION TYPE: ac_point_dc_sweep
**********************************************************

* Define the temperature
.TEMP 25.0

* Include the dut file
.INCLUDE /home/gazi/Desktop/Work/custom_packages/calibration/src/templates/mosfet_level_1/nmos/dut.cir

** Start testbenches

********************* dut testbench 22_0 *********************
v_gs_ac_22_0 g_22_0 g_ac_22_0 DC 0 AC 1
e_gs_22_0 g_ac_22_0 0 v_sweep 0 1
v_ds_22_0 d_22_0 0 0.0
v_s_22_0 s_22_0 0 0
v_bs_22_0 b_22_0 0 0.0
x_22_0 d_22_0 g_22_0 s_22_0 b_22_0 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

********************* dut testbench 22_1 *********************
v_gs_ac_22_1 g_22_1 g_ac_22_1 DC 0 AC 1
e_gs_22_1 g_ac_22_1 0 v_sweep 0 1
v_ds_22_1 d_22_1 0 0.0
v_s_22_1 s_22_1 0 0
v_bs_22_1 b_22_1 0 1.0
x_22_1 d_22_1 g_22_1 s_22_1 b_22_1 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

********************* dut testbench 22_2 *********************
v_gs_ac_22_2 g_22_2 g_ac_22_2 DC 0 AC 1
e_gs_22_2 g_ac_22_2 0 v_sweep 0 1
v_ds_22_2 d_22_2 0 0.0
v_s_22_2 s_22_2 0 0
v_bs_22_2 b_22_2 0 -1.0
x_22_2 d_22_2 g_22_2 s_22_2 b_22_2 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

** End testbenches

* Declare the v_sweep, which will change during the simulation.
v_sweep v_sweep 0 0

********** Start of control section **********
.control

** Model parameters start
alterparam dut vto = 0.5560696417388288
alterparam dut kp = 0.00022973654374805466
alterparam dut gamma = 0.02895741901434129
alterparam dut phi = 0.05791483802868258
alterparam dut rd = 1.4278982751990845
alterparam dut rs = 0.11582967605736516
alterparam dut cbd = 1.484336816360469e-19
alterparam dut cbs = 1.8904523865005416e-20
alterparam dut is = 1.8328582900325297e-15
alterparam dut pb = 0.7902812684659888
alterparam dut cgso = 3.794446032038467e-20
alterparam dut cgdo = 1.3320956719293494e-18
alterparam dut cgbo = 2.36720991735245e-17
alterparam dut rsh = 5.6902562132561325
alterparam dut cj = 6.073727792518479e-07
alterparam dut mj = 0.3313971778070685
alterparam dut cjsw = 2.5433367473226856e-15
alterparam dut mjsw = 0.05791483802868258
alterparam dut tox = 2.62456449268145e-07
alterparam dut nsub = 8.020695857269856e+17
alterparam dut nss = 569044731273731.6
alterparam dut nfs = 11524517181.039333
alterparam dut tpg = 2.6909747893168894
alterparam dut xj = 3.794446032038483e-15
alterparam dut ld = 3.0563904911705027e-09
alterparam dut uo = 458.4213508018038
alterparam dut vmax = 1467.6005787759975
alterparam dut kf = 3.794446032038467e-30
alterparam dut af = 0.2895741901434129
alterparam dut fc = 2.650009826950765
reset
** Model parameters end

** Declare the vectors to save.
save i(v_bs_22_0) i(v_bs_22_1) i(v_bs_22_2)

** Write the header of the results file.
echo "vgs,cgb_22_1,cgb_22_0,cgb_22_2" > /home/gazi/Desktop/Work/custom_packages/calibration/test/mosfet_level_1/results/calibration_2023-06-25_23:50:19/simulation_files/ac_point_dc_sweep_2.csv

** Start the simulation loop.
compose values_list start=-2.0 stop=2.0 step=0.05
foreach val $&values_list
    alter v_sweep $val
    ac lin 1 10000.0 10000.0

    let cgb_22_0 = abs(imag(i(v_bs_22_0)))/2*pi*10000.0
    let cgb_22_1 = abs(imag(i(v_bs_22_1)))/2*pi*10000.0
    let cgb_22_2 = abs(imag(i(v_bs_22_2)))/2*pi*10000.0

    echo "$val,$&cgb_22_1,$&cgb_22_0,$&cgb_22_2" >> /home/gazi/Desktop/Work/custom_packages/calibration/test/mosfet_level_1/results/calibration_2023-06-25_23:50:19/simulation_files/ac_point_dc_sweep_2.csv
end

.endc
********** End of control section **********

.end