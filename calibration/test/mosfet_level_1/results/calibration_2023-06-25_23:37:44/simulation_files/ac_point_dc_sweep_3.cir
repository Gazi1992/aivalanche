**********************************************************
* THIS FILE IS GENERATED BY AIVALANCHE
* FILE ID: 3
* SIMULATION TYPE: ac_point_dc_sweep
**********************************************************

* Define the temperature
.TEMP 25.0

* Include the dut file
.INCLUDE /home/gazi/Desktop/Work/custom_packages/calibration/src/templates/mosfet_level_1/nmos/dut.cir

** Start testbenches

********************* dut testbench 20_0 *********************
v_gs_ac_20_0 g_20_0 g_ac_20_0 DC 0 AC 1
e_gs_20_0 g_ac_20_0 0 v_sweep 0 1
v_ds_20_0 d_20_0 0 0.0
v_s_20_0 s_20_0 0 0
v_bs_20_0 b_20_0 0 0.0
x_20_0 d_20_0 g_20_0 s_20_0 b_20_0 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

********************* dut testbench 20_1 *********************
v_gs_ac_20_1 g_20_1 g_ac_20_1 DC 0 AC 1
e_gs_20_1 g_ac_20_1 0 v_sweep 0 1
v_ds_20_1 d_20_1 0 0.0
v_s_20_1 s_20_1 0 0
v_bs_20_1 b_20_1 0 1.0
x_20_1 d_20_1 g_20_1 s_20_1 b_20_1 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

********************* dut testbench 20_2 *********************
v_gs_ac_20_2 g_20_2 g_ac_20_2 DC 0 AC 1
e_gs_20_2 g_ac_20_2 0 v_sweep 0 1
v_ds_20_2 d_20_2 0 0.0
v_s_20_2 s_20_2 0 0
v_bs_20_2 b_20_2 0 -1.0
x_20_2 d_20_2 g_20_2 s_20_2 b_20_2 dut w=5e-06 l=6e-06 m=1.0
*************************************************************

** End testbenches

* Declare the v_sweep, which will change during the simulation.
v_sweep v_sweep 0 0

********** Start of control section **********
.control

** Model parameters start
alterparam dut vto = 2.4423784908875845
alterparam dut kp = 1.351513693751036e-07
alterparam dut gamma = 0.3876033803351516
alterparam dut phi = 0.08433115838917159
alterparam dut rd = 1.6655623826521595
alterparam dut rs = 0.09863832677383619
alterparam dut cbd = 1.6263172405877813e-17
alterparam dut cbs = 1.0891445697603251e-17
alterparam dut is = 2.26001927855951e-12
alterparam dut pb = 0.5936066045787582
alterparam dut cgso = 2.0033925066033247e-13
alterparam dut cgdo = 7.55769698325888e-17
alterparam dut cgbo = 9.080272731867334e-15
alterparam dut rsh = 14.078085341193127
alterparam dut cj = 0.0036058908399910984
alterparam dut mj = 0.9586640946064897
alterparam dut cjsw = 2.144785751664179e-10
alterparam dut mjsw = 0.36215360005800223
alterparam dut tox = 4.620295241862851e-06
alterparam dut nsub = 3222265158987400.5
alterparam dut nss = 182456.95503729634
alterparam dut nfs = 120713499255516.62
alterparam dut tpg = 3.5094485707105454
alterparam dut xj = 1.531540308554101e-10
alterparam dut ld = 8.130010540812215e-15
alterparam dut uo = 673.6782341823092
alterparam dut vmax = 66050.99220032083
alterparam dut kf = 6.951530894644827e-28
alterparam dut af = 2.7404379125183294
alterparam dut fc = 1.1393433109621527
reset
** Model parameters end

** Declare the vectors to save.
save i(v_ds_20_0) i(v_ds_20_2) i(v_ds_20_1)

** Write the header of the results file.
echo "vgs,cgd_20_0,cgd_20_1,cgd_20_2" > /home/gazi/Desktop/Work/custom_packages/calibration/test/mosfet_level_1/results/calibration_2023-06-25_23:37:44/simulation_files/ac_point_dc_sweep_3.csv

** Start the simulation loop.
compose values_list start=-2.0 stop=2.0 step=0.05
foreach val $&values_list
    alter v_sweep $val
    ac lin 1 10000.0 10000.0

    let cgd_20_0 = abs(imag(i(v_ds_20_0)))/2*pi*10000.0
    let cgd_20_1 = abs(imag(i(v_ds_20_1)))/2*pi*10000.0
    let cgd_20_2 = abs(imag(i(v_ds_20_2)))/2*pi*10000.0

    echo "$val,$&cgd_20_0,$&cgd_20_1,$&cgd_20_2" >> /home/gazi/Desktop/Work/custom_packages/calibration/test/mosfet_level_1/results/calibration_2023-06-25_23:37:44/simulation_files/ac_point_dc_sweep_3.csv
end

.endc
********** End of control section **********

.end